@page "/palace/{PalaceName}/editservice/{ServiceName}"

<h3>Edit Settings for service : @MicroServiceSettings.ServiceName</h3>

<EditForm Model="MicroServiceSettings" OnValidSubmit="ValidateAndSave">
    <ValidationSummary></ValidationSummary>
    <DataAnnotationsValidator/>
    <CustomValidator @ref="CustomValidator"></CustomValidator>
    @if (_isNew)
    {
        <div class="mb-3">
            <label class="form-label">ServiceName :</label>
            <InputText type="text" @bind-Value="MicroServiceSettings.ServiceName" class="form-control" />
            <small>
                <ValidationMessage For="() => MicroServiceSettings.ServiceName"/>
            </small>
        </div>
    }
    <div class="mb-3">
        <label class="form-label">AlwaysStarted :</label>
        <InputCheckbox @bind-Value="MicroServiceSettings.AlwaysStarted" class="form-check-input" />
    </div>
    <div class="mb-3">
        <label class="form-label">AdminServiceUrl :</label>
        <InputText type="text" @bind-Value="MicroServiceSettings.AdminServiceUrl" class="form-control" />
        <small>
            <ValidationMessage For="() => MicroServiceSettings.AdminServiceUrl"/>
        </small>
    </div>
    <div class="mb-3">
        <label class="form-label">Arguments :</label>
        <InputText type="text" @bind-Value="MicroServiceSettings.Arguments" class="form-control" />
        <small>
            <ValidationMessage For="() => MicroServiceSettings.Arguments"/>
        </small>
    </div>
    @*<div class="mb-3">
        <label class="form-label">InstallationFolder :</label>
        <InputText type="text" @bind-Value="MicroServiceSettings.InstallationFolder" class="form-control" />
        <small>
            <ValidationMessage For="() => MicroServiceSettings.InstallationFolder"/>
        </small>
    </div>*@
    <div class="mb-3">
        <label class="form-label">MainAssembly :</label>
        <InputText type="text" @bind-Value="MicroServiceSettings.MainAssembly" class="form-control" />
        <small>
            <ValidationMessage For="() => MicroServiceSettings.MainAssembly"/>
        </small>
    </div>
    <div class="mb-3">
        <label class="form-label">PackageFileName :</label>
        <InputText type="text" @bind-Value="MicroServiceSettings.PackageFileName" class="form-control" />
        <small>
            <ValidationMessage For="() => MicroServiceSettings.PackageFileName"/>
        </small>
    </div>
    <div class="mb-3">
        <label class="form-label">PalaceApiKey :</label>
        <InputText type="text" @bind-Value="MicroServiceSettings.PalaceApiKey" class="form-control" />
        <small>
            <ValidationMessage For="() => MicroServiceSettings.PalaceApiKey"/>
        </small>
    </div>
    <div class="mb-3">
        <label class="form-label">SSLCertificate :</label>
        <InputText type="text" @bind-Value="MicroServiceSettings.SSLCertificate" class="form-control" />
        <small>
            <ValidationMessage For="() => MicroServiceSettings.SSLCertificate"/>
        </small>
    </div>
    <div class="mb-3">
        <label class="form-label">Instance Count :</label>
        <InputNumber @bind-Value="MicroServiceSettings.InstanceCount" class="form-control" />
        <small>
            <ValidationMessage For="() => MicroServiceSettings.InstanceCount"/>
        </small>
    </div>
    <div class="mb-3">
        <label class="form-label">Thread limit before restart :</label>
        <InputNumber @bind-Value="MicroServiceSettings.ThreadLimitBeforeRestart" class="form-control" />
        <small>
            <ValidationMessage For="() => MicroServiceSettings.ThreadLimitBeforeRestart"/>
        </small>
    </div>
    <div class="mb-3">
        <label class="form-label">Not responding count before restart :</label>
        <InputNumber @bind-Value="MicroServiceSettings.NotRespondingCountBeforeRestart" class="form-control" />
        <small>
            <ValidationMessage For="() => MicroServiceSettings.NotRespondingCountBeforeRestart"/>
        </small>
    </div>
    <div class="mb-3">
        <label class="form-label">Max working set before restart :</label>
        <InputNumber @bind-Value="MicroServiceSettings.MaxWorkingSetLimitBeforeRestart" class="form-control" />
        <small>
            <ValidationMessage For="() => MicroServiceSettings.MaxWorkingSetLimitBeforeRestart"/>
        </small>
    </div>
    <br/>
    <button type="submit" class="btn btn-primary">Save</button>
</EditForm>